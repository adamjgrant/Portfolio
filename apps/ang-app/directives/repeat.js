(function(){define(["./module","../resources/scalyr-helpers"],function(a){return a.directive("slyRepeat",["$animate","$parse",function(a,b){var c;return c=function(a){return a.scope.$addWatcherGate(function(){return a.isActiveForRepeat})},{restrict:"A",scope:!0,transclude:"element",priority:1e3,terminal:!0,compile:function(b,d,e){return function(b,d,f){var g,h,i,j,k,l,m;i=f.slyRepeat,k=i.match(/^\s*(.+)\s+in\s+(.*?)$/);if(!k)throw Error("Expected slyRepeat in form of '_item_ in _collection_' but got '"+i+"'.");j=k[1],g=k[2],k=j.match(/^(?:([\$\w]+))$/);if(!k)throw Error("'item' in 'item in collection' should be identifier but got '"+lhs+"'.");return m=[],l=[],h=b.$watchCollection(g,function(f){var h,i,k,n,o,p,q,r,s,t;if(!k$.isArray(f))throw Error("'collection' did not evaluate to an array.  expression was "+g);s=m.length,m.length<f.length&&l.length>0&&(p=m.length+l.length,p>f.length&&(p=f.length),m=m.concat(l.splice(0,p-m.length))),i=null,h=[],r=[];if(f.length>m.length){n=m.length;while(n<f.length)q={scope:b.$new(),isActiveForRepeat:!0},c(q),q.scope.$index=n,q.scope.$first=n===0,r.push(q),++n;i=m.concat(r),h=l}else if(f.length<m.length){n=f.length;while(n<m.length)m[n].isActiveForRepeat=!1,++n;h=m.splice(f.length,m.length-f.length).concat(l),i=m}else i=m,h=l;if(i.length>0){k=i.length-1,o=i.length-1,s<i.length&&(k=s),k>0&&(k=k-1),n=k;while(n<=o)i[n].scope.$last=n===i.length-1,i[n].scope.$middle=n!==0&&n!==i.length-1,i[n].isActiveForRepeat||(i[n].isActiveForRepeat=!0,i[n].element.css("display","")),++n}n=0;while(n<h.length){if(h[n].isActiveForRepeat)break;h[n].element.css("display","none"),++n}n=0;while(n<i.length)i[n].scope[j]=f[n],++n;t=d,m.length>0&&(t=m[m.length-1].element),n=0;while(n<r.length)e(r[n].scope,function(b){return a.enter(b,null,t),t=b,r[n].element=b}),++n;return m=i,l=h}),b.$on("$destroy",function(){return h()})}}}}])})}).call(this)